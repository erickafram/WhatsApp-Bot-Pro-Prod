{
  "metadata": {
    "version": "2.0",
    "created": "2025-01-20T10:00:00.000Z",
    "description": "Fluxo Kleiber Passagens/Tocantins - Sistema Completo",
    "company": "Kleiber Passagens/Tocantins"
  },
  "nodes": [
    {
      "id": "start-1",
      "type": "start",
      "position": {
        "x": 50,
        "y": 50
      },
      "data": {
        "title": "Início",
        "description": "Usuário inicia conversa"
      },
      "connections": [
        "welcome-message"
      ]
    },
    {
      "id": "welcome-message",
      "type": "message",
      "position": {
        "x": 50,
        "y": 150
      },
      "data": {
        "title": "Boas-vindas Kleiber",
        "triggers": [
          "oi",
          "olá",
          "menu",
          "dia",
          "tarde",
          "noite",
          "bom dia",
          "boa tarde",
          "boa noite",
          "passagem",
          "kleiber",
          "tocantins",
          "0",
          "principal",
          "voltar",
          "inicio"
        ],
        "response": "🚌 Olá! {name} Bem-vindo à *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudá-lo hoje?\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\nDigite o número da opção desejada! 😊",
        "active": 1
      },
      "connections": [
        "option-1-buy-ticket",
        "option-2-schedules",
        "option-3-cargo",
        "option-4-tourism",
        "option-5-real-expresso",
        "keyword-blocker",
        "fallback-auto"
      ]
    },
    {
      "id": "keyword-blocker",
      "type": "condition",
      "position": {
        "x": 50,
        "y": 300
      },
      "data": {
        "title": "Bloqueio Palavras-Chave",
        "triggers": [
          "idoso",
          "idosa",
          "passe livre",
          "id jovem",
          "meia entrada",
          "gratuidade",
          "isento",
          "desconto especial"
        ],
        "response": "🏢 *ATENDIMENTO PRESENCIAL NECESSÁRIO*\n\nPara benefícios especiais como:\n• Passe Livre\n• ID Jovem\n• Gratuidade para Idosos\n• Outros descontos especiais\n\n📍 *É necessário comparecer pessoalmente na agência mais próxima* com a documentação exigida.\n\n *WhatsApp:* 63984666203\n\n🕐 *Horário de Atendimento:*\nSegunda a Sexta: 7h às 18h\nSábado: 7h às 12h\n\nObrigado pela compreensão! 🚌",
        "active": 1
      },
      "connections": [
        "end-1"
      ]
    },
    {
      "id": "option-1-buy-ticket",
      "type": "message",
      "position": {
        "x": 300,
        "y": 100
      },
      "data": {
        "title": "Opção 1 - Comprar Passagem",
        "triggers": [
          "1",
          "comprar",
          "passagem",
          "bilhete",
          "ticket"
        ],
        "response": "🎫 *COMPRAR PASSAGEM*\n\nPara prosseguir com a compra, preciso das seguintes informações:\n\n📍 *Qual cidade de origem?*\n📍 *Qual cidade de destino?*\n📅 *Qual a data da viagem?*\n\n💡 *Dica:* Digite as informações no formato:\nOrigem - Destino - Data\n\n*Exemplo:* Palmas - Brasília - 25/01/2025\n\nDigite as informações da sua viagem! ✈️",
        "active": 1
      },
      "connections": [
        "process-ticket-request",
        "keyword-blocker",
        "fallback-auto"
      ]
    },
    {
      "id": "process-ticket-request",
      "type": "human",
      "position": {
        "x": 300,
        "y": 250
      },
      "data": {
        "title": "Processar Solicitação de Passagem",
        "triggers": [
          "default"
        ],
        "response": "✅ *Recebemos sua solicitação de passagem!*\n\n👨‍💼 *Transferindo para operador especializado...*\n\nNosso atendente verificará:\n• Disponibilidade de horários\n• Valores das passagens\n• Formas de pagamento\n• Finalização da compra\n\n⏰ *Horário de Atendimento:*\nSegunda a Sexta: 6h às 22h\nSábado: 6h às 18h\nDomingo: 8h às 20h\n\nEm alguns instantes um operador entrará em contato! 🚌✨",
        "active": 1
      },
      "connections": [
        "end-1"
      ]
    },
    {
      "id": "option-2-schedules",
      "type": "message",
      "position": {
        "x": 500,
        "y": 100
      },
      "data": {
        "title": "Opção 2 - Ver Horários",
        "triggers": [
          "2",
          "horários",
          "horario",
          "hora",
          "saida"
        ],
        "response": "🕐 *HORÁRIOS DE SAÍDA - KLEIBER PASSAGENS*\n\n📋 *Principais Rotas e Horários:*\n\n🌅 *MANHÃ*\n• 06:00 - Brasília, Goiânia\n• 07:30 - São Luís, Imperatriz\n• 08:00 - Araguaína, Gurupi\n• 09:00 - Teresina, Parnaíba\n\n🌞 *TARDE*\n• 14:00 - Barreiras, L.E. Magalhães\n• 15:30 - Porto Nacional, Paraíso\n• 16:00 - Colinas do Tocantins\n\n🌙 *NOITE*\n• 20:00 - Brasília, Goiânia\n• 21:30 - São Luís, Imperatriz\n• 22:00 - Palmas (retorno)\n\n*Horários sujeitos a alterações*\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\n*0* - 🏠 Menu Principal",
        "active": 1
      },
      "connections": [
        "option-1-buy-ticket",
        "option-2-schedules",
        "option-3-cargo",
        "option-4-tourism",
        "option-5-real-expresso",
        "welcome-message",
        "fallback-auto"
      ]
    },
    {
      "id": "option-3-cargo",
      "type": "message",
      "position": {
        "x": 700,
        "y": 100
      },
      "data": {
        "title": "Opção 3 - Encomendas e Cargas",
        "triggers": [
          "3",
          "encomenda",
          "encomendas",
          "carga",
          "cargas",
          "envio",
          "remessa"
        ],
        "response": "📦 *ENCOMENDAS E CARGAS*\n\nPara envio de encomendas e cargas, entre em contato diretamente:\n\n📱 *WhatsApp Especializado:*\n*63984666203*\n\nNossos especialistas em logística irão ajudá-lo com:\n• Tarifas de envio\n• Prazos de entrega\n• Documentação necessária\n• Rastreamento de encomendas\n\n🕐 *Horário de Atendimento:*\nSegunda a Sexta: 7h às 18h\nSábado: 7h às 12h\n\n*0* - 🏠 Voltar ao Menu Principal\n\nObrigado pela preferência! 📦🚌",
        "active": 1
      },
      "connections": [
        "welcome-message",
        "fallback-auto"
      ]
    },
    {
      "id": "option-4-tourism",
      "type": "message",
      "position": {
        "x": 900,
        "y": 100
      },
      "data": {
        "title": "Opção 4 - Turismo/Locação",
        "triggers": [
          "4",
          "turismo",
          "locacao",
          "locação",
          "fretamento",
          "excursao",
          "excursão"
        ],
        "response": "🚐 *TURISMO E LOCAÇÃO*\n\nPara serviços de turismo e locação de veículos, entre em contato:\n\n📱 *WhatsApp Especializado:*\n*63984666184*\n\nNossos consultores oferecerão:\n• Pacotes turísticos\n• Locação de ônibus e vans\n• Fretamento para eventos\n• Excursões personalizadas\n• Transporte executivo\n\n🕐 *Horário de Atendimento:*\nSegunda a Sexta: 8h às 17h\nSábado: 8h às 12h\n\n*0* - 🏠 Voltar ao Menu Principal\n\nVenha viajar conosco! 🚐✨",
        "active": 1
      },
      "connections": [
        "welcome-message",
        "fallback-auto"
      ]
    },
    {
      "id": "option-5-real-expresso",
      "type": "message",
      "position": {
        "x": 1100,
        "y": 100
      },
      "data": {
        "title": "Opção 5 - Real Expresso",
        "triggers": [
          "5",
          "real expresso",
          "real",
          "expresso"
        ],
        "response": "🚌 *ATENDIMENTO REAL EXPRESSO*\n\nPara atendimento específico da Real Expresso, entre em contato:\n\n📱 *WhatsApp Especializado:*\n*63992405166*\n\nServiços Real Expresso:\n• Passagens interestaduais\n• Rotas específicas\n• Informações de horários\n• Reservas e cancelamentos\n\n🕐 *Horário de Atendimento:*\nSegunda a Sexta: 6h às 22h\nSábado: 6h às 18h\nDomingo: 8h às 20h\n\n*0* - 🏠 Voltar ao Menu Principal\n\nObrigado pela preferência! 🚌",
        "active": 1
      },
      "connections": [
        "welcome-message",
        "fallback-auto"
      ]
    },

    {
      "id": "fallback-auto",
      "type": "human",
      "position": {
        "x": 300,
        "y": 600
      },
      "data": {
        "title": "Fallback Automático",
        "description": "Transfere automaticamente para operador quando não há correspondência",
        "response": "👨‍💼 *TRANSFERINDO PARA ATENDIMENTO HUMANO*\n\n🤔 Não consegui processar sua mensagem automaticamente, mas nossa equipe especializada poderá ajudá-lo melhor!\n\n⏰ *Horário de Atendimento:*\nSegunda a Sexta: 6h às 22h\nSábado: 6h às 18h\nDomingo: 8h às 20h\n\nEm alguns instantes um operador entrará em contato!\n\nObrigado pela paciência! 🚌✨"
      },
      "connections": []
    },
    {
      "id": "chat-ended-options",
      "type": "message",
      "position": {
        "x": 400,
        "y": 350
      },
      "data": {
        "title": "Opções Pós-Encerramento",
        "triggers": [
          "CHAT_ENDED_BY_OPERATOR"
        ],
        "response": "✅ *CONVERSA ENCERRADA*\n\nSua conversa com o operador {operatorName} foi finalizada.\n\nVocê pode a qualquer momento:\n\n*1* - 👨‍💼 Voltar a falar com o operador {operatorName}\n*2* - 🏠 Ir para o Menu Principal\n*3* - 👥 Falar com outro operador\n\nDigite o número da opção desejada! 😊",
        "active": 1
      },
      "connections": [
        "reconnect-operator",
        "welcome-message", 
        "new-operator-chat",
        "fallback-auto"
      ]
    },
    {
      "id": "reconnect-operator",
      "type": "human",
      "position": {
        "x": 200,
        "y": 500
      },
      "data": {
        "title": "Reconectar com Operador",
        "triggers": [
          "1",
          "operador",
          "mesmo operador",
          "voltar"
        ],
        "response": "👨‍💼 *RECONECTANDO COM OPERADOR*\n\nPerfeito! Estou reconectando você com o operador {operatorName}.\n\n⏰ *Status:* Aguardando operador disponível\n\nEm alguns instantes {operatorName} retornará para continuar o atendimento!\n\n*Observação:* Se o operador não estiver disponível, outro membro da equipe poderá ajudá-lo."
      },
      "connections": []
    },
    {
      "id": "new-operator-chat", 
      "type": "human",
      "position": {
        "x": 600,
        "y": 500
      },
      "data": {
        "title": "Novo Atendimento",
        "triggers": [
          "3",
          "outro operador",
          "nova conversa",
          "novo atendimento"
        ],
        "response": "👥 *NOVO ATENDIMENTO*\n\nEntendi! Vou direcioná-lo para um novo atendimento.\n\nEm alguns instantes um operador entrará em contato para ajudá-lo!\n\nObrigado pela preferência! 🚌✨"
      },
      "connections": []
    },
    {
      "id": "end-1",
      "type": "end",
      "position": {
        "x": 650,
        "y": 650
      },
      "data": {
        "title": "Fim da Conversa",
        "description": "Conversa finalizada ou transferida"
      },
      "connections": []
    }
  ],
  "connections": [
    {
      "id": "start-1-welcome-message",
      "source": "start-1",
      "target": "welcome-message"
    },
    {
      "id": "welcome-message-option-1-buy-ticket",
      "source": "welcome-message",
      "target": "option-1-buy-ticket"
    },
    {
      "id": "welcome-message-option-2-schedules",
      "source": "welcome-message",
      "target": "option-2-schedules"
    },
    {
      "id": "welcome-message-option-3-cargo",
      "source": "welcome-message",
      "target": "option-3-cargo"
    },
    {
      "id": "welcome-message-option-4-tourism",
      "source": "welcome-message",
      "target": "option-4-tourism"
    },
    {
      "id": "welcome-message-option-5-real-expresso",
      "source": "welcome-message",
      "target": "option-5-real-expresso"
    },
    {
      "id": "welcome-message-keyword-blocker",
      "source": "welcome-message",
      "target": "keyword-blocker"
    },

    {
      "id": "welcome-message-fallback-auto",
      "source": "welcome-message",
      "target": "fallback-auto"
    },
    {
      "id": "option-1-buy-ticket-process-ticket-request",
      "source": "option-1-buy-ticket",
      "target": "process-ticket-request"
    },
    {
      "id": "option-1-buy-ticket-keyword-blocker",
      "source": "option-1-buy-ticket",
      "target": "keyword-blocker"
    },
    {
      "id": "option-1-buy-ticket-fallback-auto",
      "source": "option-1-buy-ticket",
      "target": "fallback-auto"
    },
    {
      "id": "option-2-schedules-option-1-buy-ticket",
      "source": "option-2-schedules",
      "target": "option-1-buy-ticket"
    },
    {
      "id": "option-2-schedules-option-2-schedules",
      "source": "option-2-schedules",
      "target": "option-2-schedules"
    },
    {
      "id": "option-2-schedules-option-3-cargo",
      "source": "option-2-schedules",
      "target": "option-3-cargo"
    },
    {
      "id": "option-2-schedules-option-4-tourism",
      "source": "option-2-schedules",
      "target": "option-4-tourism"
    },
    {
      "id": "option-2-schedules-option-5-real-expresso",
      "source": "option-2-schedules",
      "target": "option-5-real-expresso"
    },
    {
      "id": "option-2-schedules-welcome-message",
      "source": "option-2-schedules",
      "target": "welcome-message"
    },
    {
      "id": "option-2-schedules-fallback-auto",
      "source": "option-2-schedules",
      "target": "fallback-auto"
    },
    {
      "id": "option-3-cargo-welcome-message",
      "source": "option-3-cargo",
      "target": "welcome-message"
    },
    {
      "id": "option-3-cargo-fallback-auto",
      "source": "option-3-cargo",
      "target": "fallback-auto"
    },
    {
      "id": "option-4-tourism-welcome-message",
      "source": "option-4-tourism",
      "target": "welcome-message"
    },
    {
      "id": "option-4-tourism-fallback-auto",
      "source": "option-4-tourism",
      "target": "fallback-auto"
    },
    {
      "id": "option-5-real-expresso-welcome-message",
      "source": "option-5-real-expresso",
      "target": "welcome-message"
    },
    {
      "id": "option-5-real-expresso-fallback-auto",
      "source": "option-5-real-expresso",
      "target": "fallback-auto"
    },
    {
      "id": "keyword-blocker-end-1",
      "source": "keyword-blocker",
      "target": "end-1"
    },
    {
      "id": "process-ticket-request-end-1",
      "source": "process-ticket-request",
      "target": "end-1"
    },
    {
      "id": "option-2-schedules-welcome-message",
      "source": "option-2-schedules",
      "target": "welcome-message"
    },
    {
      "id": "option-3-cargo-welcome-message",
      "source": "option-3-cargo",
      "target": "welcome-message"
    },
    {
      "id": "option-4-tourism-welcome-message",
      "source": "option-4-tourism",
      "target": "welcome-message"
    },
    {
      "id": "option-5-real-expresso-welcome-message",
      "source": "option-5-real-expresso",
      "target": "welcome-message"
    },
    {
      "id": "chat-ended-options-reconnect-operator",
      "source": "chat-ended-options",
      "target": "reconnect-operator"
    },
    {
      "id": "chat-ended-options-welcome-message",
      "source": "chat-ended-options", 
      "target": "welcome-message"
    },
    {
      "id": "chat-ended-options-new-operator-chat",
      "source": "chat-ended-options",
      "target": "new-operator-chat"
    },
    {
      "id": "chat-ended-options-fallback-auto",
      "source": "chat-ended-options",
      "target": "fallback-auto"
    }
  ],
  "settings": {
    "auto_transfer_timeout": 300,
    "fallback_to_human": true,
    "keyword_blocking_enabled": true,
    "blocked_keywords": [
      "idoso",
      "idosa",
      "passe livre",
      "id jovem",
      "meia entrada",
      "gratuidade",
      "isento",
      "desconto especial"
    ],
    "business_hours": {
      "monday_friday": "06:00-22:00",
      "saturday": "06:00-18:00",
      "sunday": "08:00-20:00"
    },
    "contact_numbers": {
      "main": "63984666203",
      "cargo": "63984666203",
      "tourism": "63984666184",
      "real_expresso": "63992405166"
    }
  }
}
