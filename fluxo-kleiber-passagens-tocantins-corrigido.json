{
  "metadata": {
    "version": "1.1",
    "created": "2025-09-01T03:43:00.200Z",
    "updated": "2025-09-01T04:00:00.000Z",
    "description": "Fluxo de conversação automática - Versão corrigida"
  },
  "nodes": [
    {
      "id": "start-1",
      "type": "start",
      "position": {
        "x": 50,
        "y": 50
      },
      "data": {
        "title": "Início",
        "description": "Usuário inicia conversa"
      },
      "connections": [
        "welcome-message"
      ]
    },
    {
      "id": "blocked-keywords-check",
      "type": "condition",
      "position": {
        "x": 900,
        "y": 50
      },
      "data": {
        "title": "Verificar Palavras Bloqueadas",
        "priority": 1,
        "triggers": [
          "idoso",
          "idosa", 
          "passe livre",
          "id jovem",
          "meia entrada",
          "gratuidade",
          "isento",
          "desconto especial"
        ],
        "response": "🏢 *ATENDIMENTO PRESENCIAL NECESSÁRIO*\n\nPara benefícios especiais como:\n• Passe Livre\n• ID Jovem\n• Gratuidade para Idosos\n• Outros descontos especiais\n\n📍 *É necessário comparecer pessoalmente na agência mais próxima* com a documentação exigida.\n\nObrigado pela compreensão! 🚌",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "thank-you-check",
      "type": "condition", 
      "position": {
        "x": 900,
        "y": 150
      },
      "data": {
        "title": "Verificar Agradecimentos",
        "priority": 2,
        "triggers": [
          "obrigado",
          "obrigada",
          "valeu",
          "muito obrigado",
          "muito obrigada",
          "brigadão",
          "brigada",
          "thank"
        ],
        "response": "🙏 Por nada! Foi um prazer ajudá-lo(a)!\n\nSe precisar de mais alguma coisa, estarei sempre aqui! 😊\n\nTenha um ótimo dia/tarde/noite! 🚌✨",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "menu-zero-check",
      "type": "message",
      "position": {
        "x": 900,
        "y": 250
      },
      "data": {
        "title": "Opção 0 - Menu Principal",
        "priority": 3,
        "triggers": ["0"],
        "response": "🚌 Olá! {name} Bem-vindo à *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudá-lo hoje?\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\nDigite o número da opção desejada! 😊",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "human-request-check",
      "type": "human",
      "position": {
        "x": 900,
        "y": 350
      },
      "data": {
        "title": "Solicitação de Atendimento Humano",
        "priority": 4,
        "triggers": [
          "operador",
          "atendente", 
          "humano",
          "pessoa",
          "falar com",
          "atendimento",
          "suporte",
          "ajuda personalizada",
          "quero falar",
          "alguém",
          "funcionario",
          "funcionário"
        ],
        "response": "👨‍💼 *Transferindo para atendimento humano*\n\nEm alguns instantes um operador entrará em contato para ajudá-lo!\n\nObrigado pela preferência! 🚌",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-1",
      "type": "human",
      "position": {
        "x": 1200,
        "y": 50
      },
      "data": {
        "title": "Pós-Encerramento - Opção 1",
        "priority": 10,
        "triggers": ["1"],
        "post_closure_only": true,
        "response": "👨‍💼 *RECONECTANDO COM OPERADOR*\n\nPerfeito! Estou reconectando você com o operador {operatorName}.\n\n⏰ *Status:* Aguardando operador disponível\n\nEm alguns instantes {operatorName} retornará para continuar o atendimento!\n\n*Observação:* Se o operador não estiver disponível, outro membro da equipe poderá ajudá-lo.",
        "active": 1,
        "action": "reactivate_same_operator",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-2", 
      "type": "message",
      "position": {
        "x": 1200,
        "y": 150
      },
      "data": {
        "title": "Pós-Encerramento - Opção 2",
        "priority": 10,
        "triggers": ["2"],
        "post_closure_only": true,
        "response": "🚌 Olá! {name} Bem-vindo à *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudá-lo hoje?\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\nDigite o número da opção desejada! 😊",
        "active": 1,
        "action": "reset_chat_status",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-3",
      "type": "human", 
      "position": {
        "x": 1200,
        "y": 250
      },
      "data": {
        "title": "Pós-Encerramento - Opção 3",
        "priority": 10,
        "triggers": ["3"],
        "post_closure_only": true,
        "response": "👥 *NOVO ATENDIMENTO*\n\nEntendi! Vou direcioná-lo para um novo atendimento.\n\nEm alguns instantes um operador entrará em contato para ajudá-lo!\n\nObrigado pela preferência! 🚌✨",
        "active": 1,
        "action": "reactivate_new_operator",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-invalid",
      "type": "message",
      "position": {
        "x": 1200,
        "y": 350
      },
      "data": {
        "title": "Pós-Encerramento - Opção Inválida",
        "priority": 11,
        "triggers": ["*"],
        "post_closure_only": true,
        "response": "*{operatorName}:* ✅ *CONVERSA ENCERRADA*\n\nSua conversa com o operador {operatorName} foi finalizada.\n\nVocê pode a qualquer momento:\n\n*1* - 👨‍💼 Voltar a falar com o operador {operatorName}\n*2* - 🏠 Ir para o Menu Principal  \n*3* - 👥 Falar com outro operador\n\nDigite o número da opção desejada! 😊",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "welcome-message",
      "type": "message",
      "position": {
        "x": 50,
        "y": 150
      },
      "data": {
        "title": "Boas-vindas",
        "triggers": [
          "oi",
          "olá",
          "ola",
          "menu",
          "dia",
          "tarde",
          "noite",
          "bom dia",
          "boa tarde",
          "boa noite",
          "tudo bem",
          "como vai",
          "oi tudo bem",
          "e ai",
          "eai",
          "opa",
          "salve",
          "passagem",
          "kleiber",
          "tocantins",
          "0",
          "principal",
          "voltar",
          "inicio",
          "audio",
          "imagem",
          "video",
          "documento",
          "mídia"
        ],
        "response": "🚌 Olá! {name} Bem-vindo à *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudá-lo hoje?\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\nDigite o número da opção desejada! 😊",
        "active": 1
      },
      "connections": [
        "option-1-buy-ticket",
        "option-2-schedules",
        "option-3-packages",
        "option-4-tourism",
        "option-5-real-expresso",
        "fallback-auto"
      ]
    },
    {
      "id": "option-1-buy-ticket",
      "type": "message",
      "position": {
        "x": 300,
        "y": 100
      },
      "data": {
        "title": "Opção 1 - Comprar Passagem",
        "triggers": [
          "1",
          "comprar",
          "passagem",
          "bilhete",
          "ticket"
        ],
        "response": "🎫 *COMPRAR PASSAGEM*\n\nPara prosseguir com a compra, preciso das seguintes informações:\n\n📍 *Qual cidade de origem?*\n📍 *Qual cidade de destino?*\n📅 *Qual a data da viagem?*\n\n💡 *Dica:* Digite as informações no formato:\nOrigem - Destino - Data\n\n*Exemplo:* Palmas - Goiânia - 01/09/2025\n\nDigite as informações da sua viagem! 🚌",
        "active": 1
      },
      "connections": [
        "process-ticket-request"
      ]
    },
    {
      "id": "process-ticket-request",
      "type": "human",
      "position": {
        "x": 300,
        "y": 200
      },
      "data": {
        "title": "Processar Solicitação de Passagem",
        "description": "Captura informações de viagem e transfere para operador",
        "response": "✅ *Recebemos sua solicitação de passagem!*\n\n👨‍💼 *Transferindo para operador especializado...*\n\nNosso atendente verificará:\n• Disponibilidade de horários\n• Valores das passagens\n• Formas de pagamento\n• Finalização da compra\n\n⏰ *Horário de Atendimento:*\nSegunda a Sexta: 08:00 às 19:00\nSábado e Domingo: 08:00 às 12:00 e 14:00 às 19:00\n\nEm alguns instantes um operador entrará em contato! 🚌✨",
        "active": 1
      },
      "connections": []
    },
    {
      "id": "option-2-schedules",
      "type": "message",
      "position": {
        "x": 500,
        "y": 100
      },
      "data": {
        "title": "Opção 2 - Ver Horários",
        "triggers": [
          "2",
          "horários",
          "horario",
          "hora",
          "saida"
        ],
        "response": "🕐 *HORÁRIOS DE SAÍDA - KLEIBER PASSAGENS*\n\n📋 *Principais Rotas e Horários:*\n\n🌅 *MANHÃ*\n• 06:45 - PALMAS X ALVORADA\n• 07:00 - PALMAS X PAU D'ARCO\n• 09:00 - PALMAS X ITACAJÁ\n• 11:00 - PALMAS X PALMEIRÓPOLIS\n\n🌞 *TARDE*\n• 18:00 - PALMAS X BURITI\n\n🌙 *NOITE*\n• 19:00 - PALMAS X GOIÂNIA\n• 19:15 - PALMAS X GOIÂNIA\n• 19:30 - PALMAS X GOIÂNIA\n• 19:00 - PALMAS X CANABRAVA\n• 19:00 - PALMAS X BRASÍLIA\n• 20:30 - PALMAS X IMPERATRIZ\n\n*Horários sujeitos a alterações*\n\n*1* - 🎫 Comprar Passagem\n*2* - 🕐 Ver Horários\n*3* - 📦 Encomendas e Cargas\n*4* - 🚐 Turismo/Locação\n*5* - 🚌 Atendimento Real Expresso\n\n*0* - 🏠 Menu Principal",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-3-packages",
      "type": "message",
      "position": {
        "x": 700,
        "y": 100
      },
      "data": {
        "title": "Opção 3 - Encomendas e Cargas",
        "triggers": [
          "3",
          "encomenda",
          "encomendas",
          "carga",
          "cargas",
          "envio",
          "remessa"
        ],
        "response": "📦 *ENCOMENDAS E CARGAS*\n\nPara envio de encomendas e cargas, entre em contato diretamente:\n\n📱 *WhatsApp Especializado:*\n*(63) 99120-5348*\n\nNossos especialistas em logística irão ajudá-lo com:\n• Tarifas de envio\n• Prazos de entrega\n• Documentação necessária\n• Rastreamento de encomendas\n\n🕐 *Horário de Atendimento:*\nDe segunda a sexta-feira:\nDas 08:00 às 12:00\nDas 14:00 às 18:00\n\nAos sábados:\nDas 08:00 às 12:00\n\nDomingo: Fechado\n\n*0* - 🏠 Voltar ao Menu Principal\n\nObrigado pela preferência! 📦🚌",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-4-tourism",
      "type": "message",
      "position": {
        "x": 900,
        "y": 100
      },
      "data": {
        "title": "Opção 4 - Turismo e Locação",
        "triggers": [
          "4",
          "turismo",
          "locacao",
          "locação",
          "fretamento",
          "excursao",
          "excursão"
        ],
        "response": "🚐 *TURISMO E LOCAÇÃO*\n\nPara serviços de turismo e locação de veículos, entre em contato:\n\n📱 *WhatsApp Especializado:*\n*(63) 98466-6184*\n\nNossos consultores oferecerão:\n• Pacotes turísticos\n• Locação de ônibus e vans\n• Fretamento para eventos\n• Excursões personalizadas\n• Transporte executivo\n\n🕐 *Horário de Atendimento:*\nDe segunda a sexta-feira:\nDas 08:00 às 12:00\nDas 14:00 às 18:00\n\nAos sábados:\nDas 08:00 às 12:00\n\nDomingo: Fechado\n\n*0* - 🏠 Voltar ao Menu Principal\n\nVenha viajar conosco! 🚐✨",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-5-real-expresso",
      "type": "message",
      "position": {
        "x": 300,
        "y": 300
      },
      "data": {
        "title": "Opção 5 - Real Expresso",
        "triggers": [
          "5",
          "real expresso",
          "real",
          "expresso"
        ],
        "response": "🚌 *ATENDIMENTO REAL EXPRESSO*\n\nPara atendimento específico da Real Expresso, entre em contato:\n\n📱 *WhatsApp Especializado:*\n*(63) 99240-5166*\n\nServiços Real Expresso:\n• Passagens interestaduais\n• Rotas específicas\n• Informações de horários\n• Reservas e cancelamentos\n\n🕐 *Horário de Atendimento:*\nSegunda a sexta: Das 08:00 às 19:00\n\nSábado e domingo:\nDas 08:00 às 12:00\nDas 14:00 às 19:00\n\n*0* - 🏠 Voltar ao Menu Principal\n\nObrigado pela preferência! 🚌",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "fallback-auto",
      "type": "human",
      "position": {
        "x": 300,
        "y": 600
      },
      "data": {
        "title": "Fallback Automático",
        "description": "Transfere automaticamente para operador quando não há correspondência",
        "triggers": ["*"],
        "response": "👨‍💼 Vou transferir você para nosso atendimento especializado!\n\n🤔 Não consegui processar sua mensagem automaticamente, mas nossa equipe poderá ajudá-lo melhor.\n\nEm alguns instantes um operador entrará em contato!",
        "priority": 999
      },
      "connections": []
    },
    {
      "id": "end-1",
      "type": "end",
      "position": {
        "x": 650,
        "y": 250
      },
      "data": {
        "title": "Fim",
        "description": "Conversa finalizada"
      },
      "connections": []
    }
  ],
  "connections": [
    {
      "id": "start-1-welcome-message",
      "source": "start-1",
      "target": "welcome-message"
    },
    {
      "id": "welcome-message-option-1-buy-ticket",
      "source": "welcome-message",
      "target": "option-1-buy-ticket"
    },
    {
      "id": "welcome-message-option-2-schedules",
      "source": "welcome-message",
      "target": "option-2-schedules"
    },
    {
      "id": "welcome-message-option-3-packages",
      "source": "welcome-message",
      "target": "option-3-packages"
    },
    {
      "id": "welcome-message-option-4-tourism",
      "source": "welcome-message",
      "target": "option-4-tourism"
    },
    {
      "id": "welcome-message-option-5-real-expresso",
      "source": "welcome-message",
      "target": "option-5-real-expresso"
    },
    {
      "id": "welcome-message-fallback-auto",
      "source": "welcome-message",
      "target": "fallback-auto"
    },
    {
      "id": "option-1-buy-ticket-process-ticket-request",
      "source": "option-1-buy-ticket",
      "target": "process-ticket-request"
    },
    {
      "id": "option-2-schedules-fallback-auto",
      "source": "option-2-schedules",
      "target": "fallback-auto"
    },
    {
      "id": "option-3-packages-fallback-auto",
      "source": "option-3-packages",
      "target": "fallback-auto"
    },
    {
      "id": "option-4-tourism-fallback-auto",
      "source": "option-4-tourism",
      "target": "fallback-auto"
    },
    {
      "id": "option-5-real-expresso-fallback-auto",
      "source": "option-5-real-expresso",
      "target": "fallback-auto"
    }
  ]
}
