{
  "metadata": {
    "version": "1.1",
    "created": "2025-09-01T03:43:00.200Z",
    "updated": "2025-09-01T04:00:00.000Z",
    "description": "Fluxo de conversaÃ§Ã£o automÃ¡tica - VersÃ£o corrigida"
  },
  "nodes": [
    {
      "id": "start-1",
      "type": "start",
      "position": {
        "x": 50,
        "y": 50
      },
      "data": {
        "title": "InÃ­cio",
        "description": "UsuÃ¡rio inicia conversa"
      },
      "connections": [
        "welcome-message"
      ]
    },
    {
      "id": "blocked-keywords-check",
      "type": "condition",
      "position": {
        "x": 900,
        "y": 50
      },
      "data": {
        "title": "Verificar Palavras Bloqueadas",
        "priority": 1,
        "triggers": [
          "idoso",
          "idosa", 
          "passe livre",
          "id jovem",
          "meia entrada",
          "gratuidade",
          "isento",
          "desconto especial"
        ],
        "response": "ğŸ¢ *ATENDIMENTO PRESENCIAL NECESSÃRIO*\n\nPara benefÃ­cios especiais como:\nâ€¢ Passe Livre\nâ€¢ ID Jovem\nâ€¢ Gratuidade para Idosos\nâ€¢ Outros descontos especiais\n\nğŸ“ *Ã‰ necessÃ¡rio comparecer pessoalmente na agÃªncia mais prÃ³xima* com a documentaÃ§Ã£o exigida.\n\nObrigado pela compreensÃ£o! ğŸšŒ",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "thank-you-check",
      "type": "condition", 
      "position": {
        "x": 900,
        "y": 150
      },
      "data": {
        "title": "Verificar Agradecimentos",
        "priority": 2,
        "triggers": [
          "obrigado",
          "obrigada",
          "valeu",
          "muito obrigado",
          "muito obrigada",
          "brigadÃ£o",
          "brigada",
          "thank"
        ],
        "response": "ğŸ™ Por nada! Foi um prazer ajudÃ¡-lo(a)!\n\nSe precisar de mais alguma coisa, estarei sempre aqui! ğŸ˜Š\n\nTenha um Ã³timo dia/tarde/noite! ğŸšŒâœ¨",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "menu-zero-check",
      "type": "message",
      "position": {
        "x": 900,
        "y": 250
      },
      "data": {
        "title": "OpÃ§Ã£o 0 - Menu Principal",
        "priority": 3,
        "triggers": ["0"],
        "response": "ğŸšŒ OlÃ¡! {name} Bem-vindo Ã  *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudÃ¡-lo hoje?\n\n*1* - ğŸ« Comprar Passagem\n*2* - ğŸ• Ver HorÃ¡rios\n*3* - ğŸ“¦ Encomendas e Cargas\n*4* - ğŸš Turismo/LocaÃ§Ã£o\n*5* - ğŸšŒ Atendimento Real Expresso\n\nDigite o nÃºmero da opÃ§Ã£o desejada! ğŸ˜Š",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "human-request-check",
      "type": "human",
      "position": {
        "x": 900,
        "y": 350
      },
      "data": {
        "title": "SolicitaÃ§Ã£o de Atendimento Humano",
        "priority": 4,
        "triggers": [
          "operador",
          "atendente", 
          "humano",
          "pessoa",
          "falar com",
          "atendimento",
          "suporte",
          "ajuda personalizada",
          "quero falar",
          "alguÃ©m",
          "funcionario",
          "funcionÃ¡rio"
        ],
        "response": "ğŸ‘¨â€ğŸ’¼ *Transferindo para atendimento humano*\n\nEm alguns instantes um operador entrarÃ¡ em contato para ajudÃ¡-lo!\n\nObrigado pela preferÃªncia! ğŸšŒ",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-1",
      "type": "human",
      "position": {
        "x": 1200,
        "y": 50
      },
      "data": {
        "title": "PÃ³s-Encerramento - OpÃ§Ã£o 1",
        "priority": 10,
        "triggers": ["1"],
        "post_closure_only": true,
        "response": "ğŸ‘¨â€ğŸ’¼ *RECONECTANDO COM OPERADOR*\n\nPerfeito! Estou reconectando vocÃª com o operador {operatorName}.\n\nâ° *Status:* Aguardando operador disponÃ­vel\n\nEm alguns instantes {operatorName} retornarÃ¡ para continuar o atendimento!\n\n*ObservaÃ§Ã£o:* Se o operador nÃ£o estiver disponÃ­vel, outro membro da equipe poderÃ¡ ajudÃ¡-lo.",
        "active": 1,
        "action": "reactivate_same_operator",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-2", 
      "type": "message",
      "position": {
        "x": 1200,
        "y": 150
      },
      "data": {
        "title": "PÃ³s-Encerramento - OpÃ§Ã£o 2",
        "priority": 10,
        "triggers": ["2"],
        "post_closure_only": true,
        "response": "ğŸšŒ OlÃ¡! {name} Bem-vindo Ã  *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudÃ¡-lo hoje?\n\n*1* - ğŸ« Comprar Passagem\n*2* - ğŸ• Ver HorÃ¡rios\n*3* - ğŸ“¦ Encomendas e Cargas\n*4* - ğŸš Turismo/LocaÃ§Ã£o\n*5* - ğŸšŒ Atendimento Real Expresso\n\nDigite o nÃºmero da opÃ§Ã£o desejada! ğŸ˜Š",
        "active": 1,
        "action": "reset_chat_status",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-option-3",
      "type": "human", 
      "position": {
        "x": 1200,
        "y": 250
      },
      "data": {
        "title": "PÃ³s-Encerramento - OpÃ§Ã£o 3",
        "priority": 10,
        "triggers": ["3"],
        "post_closure_only": true,
        "response": "ğŸ‘¥ *NOVO ATENDIMENTO*\n\nEntendi! Vou direcionÃ¡-lo para um novo atendimento.\n\nEm alguns instantes um operador entrarÃ¡ em contato para ajudÃ¡-lo!\n\nObrigado pela preferÃªncia! ğŸšŒâœ¨",
        "active": 1,
        "action": "reactivate_new_operator",
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "post-closure-invalid",
      "type": "message",
      "position": {
        "x": 1200,
        "y": 350
      },
      "data": {
        "title": "PÃ³s-Encerramento - OpÃ§Ã£o InvÃ¡lida",
        "priority": 11,
        "triggers": ["*"],
        "post_closure_only": true,
        "response": "*{operatorName}:* âœ… *CONVERSA ENCERRADA*\n\nSua conversa com o operador {operatorName} foi finalizada.\n\nVocÃª pode a qualquer momento:\n\n*1* - ğŸ‘¨â€ğŸ’¼ Voltar a falar com o operador {operatorName}\n*2* - ğŸ  Ir para o Menu Principal  \n*3* - ğŸ‘¥ Falar com outro operador\n\nDigite o nÃºmero da opÃ§Ã£o desejada! ğŸ˜Š",
        "active": 1,
        "stop_processing": true
      },
      "connections": []
    },
    {
      "id": "welcome-message",
      "type": "message",
      "position": {
        "x": 50,
        "y": 150
      },
      "data": {
        "title": "Boas-vindas",
        "triggers": [
          "oi",
          "olÃ¡",
          "ola",
          "menu",
          "dia",
          "tarde",
          "noite",
          "bom dia",
          "boa tarde",
          "boa noite",
          "tudo bem",
          "como vai",
          "oi tudo bem",
          "e ai",
          "eai",
          "opa",
          "salve",
          "passagem",
          "kleiber",
          "tocantins",
          "0",
          "principal",
          "voltar",
          "inicio",
          "audio",
          "imagem",
          "video",
          "documento",
          "mÃ­dia"
        ],
        "response": "ğŸšŒ OlÃ¡! {name} Bem-vindo Ã  *Kleiber Passagens/ Tocantins*! \n\nComo posso ajudÃ¡-lo hoje?\n\n*1* - ğŸ« Comprar Passagem\n*2* - ğŸ• Ver HorÃ¡rios\n*3* - ğŸ“¦ Encomendas e Cargas\n*4* - ğŸš Turismo/LocaÃ§Ã£o\n*5* - ğŸšŒ Atendimento Real Expresso\n\nDigite o nÃºmero da opÃ§Ã£o desejada! ğŸ˜Š",
        "active": 1
      },
      "connections": [
        "option-1-buy-ticket",
        "option-2-schedules",
        "option-3-packages",
        "option-4-tourism",
        "option-5-real-expresso",
        "fallback-auto"
      ]
    },
    {
      "id": "option-1-buy-ticket",
      "type": "message",
      "position": {
        "x": 300,
        "y": 100
      },
      "data": {
        "title": "OpÃ§Ã£o 1 - Comprar Passagem",
        "triggers": [
          "1",
          "comprar",
          "passagem",
          "bilhete",
          "ticket"
        ],
        "response": "ğŸ« *COMPRAR PASSAGEM*\n\nPara prosseguir com a compra, preciso das seguintes informaÃ§Ãµes:\n\nğŸ“ *Qual cidade de origem?*\nğŸ“ *Qual cidade de destino?*\nğŸ“… *Qual a data da viagem?*\n\nğŸ’¡ *Dica:* Digite as informaÃ§Ãµes no formato:\nOrigem - Destino - Data\n\n*Exemplo:* Palmas - GoiÃ¢nia - 01/09/2025\n\nDigite as informaÃ§Ãµes da sua viagem! ğŸšŒ",
        "active": 1
      },
      "connections": [
        "process-ticket-request"
      ]
    },
    {
      "id": "process-ticket-request",
      "type": "human",
      "position": {
        "x": 300,
        "y": 200
      },
      "data": {
        "title": "Processar SolicitaÃ§Ã£o de Passagem",
        "description": "Captura informaÃ§Ãµes de viagem e transfere para operador",
        "response": "âœ… *Recebemos sua solicitaÃ§Ã£o de passagem!*\n\nğŸ‘¨â€ğŸ’¼ *Transferindo para operador especializado...*\n\nNosso atendente verificarÃ¡:\nâ€¢ Disponibilidade de horÃ¡rios\nâ€¢ Valores das passagens\nâ€¢ Formas de pagamento\nâ€¢ FinalizaÃ§Ã£o da compra\n\nâ° *HorÃ¡rio de Atendimento:*\nSegunda a Sexta: 08:00 Ã s 19:00\nSÃ¡bado e Domingo: 08:00 Ã s 12:00 e 14:00 Ã s 19:00\n\nEm alguns instantes um operador entrarÃ¡ em contato! ğŸšŒâœ¨",
        "active": 1
      },
      "connections": []
    },
    {
      "id": "option-2-schedules",
      "type": "message",
      "position": {
        "x": 500,
        "y": 100
      },
      "data": {
        "title": "OpÃ§Ã£o 2 - Ver HorÃ¡rios",
        "triggers": [
          "2",
          "horÃ¡rios",
          "horario",
          "hora",
          "saida"
        ],
        "response": "ğŸ• *HORÃRIOS DE SAÃDA - KLEIBER PASSAGENS*\n\nğŸ“‹ *Principais Rotas e HorÃ¡rios:*\n\nğŸŒ… *MANHÃƒ*\nâ€¢ 06:45 - PALMAS X ALVORADA\nâ€¢ 07:00 - PALMAS X PAU D'ARCO\nâ€¢ 09:00 - PALMAS X ITACAJÃ\nâ€¢ 11:00 - PALMAS X PALMEIRÃ“POLIS\n\nğŸŒ *TARDE*\nâ€¢ 18:00 - PALMAS X BURITI\n\nğŸŒ™ *NOITE*\nâ€¢ 19:00 - PALMAS X GOIÃ‚NIA\nâ€¢ 19:15 - PALMAS X GOIÃ‚NIA\nâ€¢ 19:30 - PALMAS X GOIÃ‚NIA\nâ€¢ 19:00 - PALMAS X CANABRAVA\nâ€¢ 19:00 - PALMAS X BRASÃLIA\nâ€¢ 20:30 - PALMAS X IMPERATRIZ\n\n*HorÃ¡rios sujeitos a alteraÃ§Ãµes*\n\n*1* - ğŸ« Comprar Passagem\n*2* - ğŸ• Ver HorÃ¡rios\n*3* - ğŸ“¦ Encomendas e Cargas\n*4* - ğŸš Turismo/LocaÃ§Ã£o\n*5* - ğŸšŒ Atendimento Real Expresso\n\n*0* - ğŸ  Menu Principal",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-3-packages",
      "type": "message",
      "position": {
        "x": 700,
        "y": 100
      },
      "data": {
        "title": "OpÃ§Ã£o 3 - Encomendas e Cargas",
        "triggers": [
          "3",
          "encomenda",
          "encomendas",
          "carga",
          "cargas",
          "envio",
          "remessa"
        ],
        "response": "ğŸ“¦ *ENCOMENDAS E CARGAS*\n\nPara envio de encomendas e cargas, entre em contato diretamente:\n\nğŸ“± *WhatsApp Especializado:*\n*(63) 99120-5348*\n\nNossos especialistas em logÃ­stica irÃ£o ajudÃ¡-lo com:\nâ€¢ Tarifas de envio\nâ€¢ Prazos de entrega\nâ€¢ DocumentaÃ§Ã£o necessÃ¡ria\nâ€¢ Rastreamento de encomendas\n\nğŸ• *HorÃ¡rio de Atendimento:*\nDe segunda a sexta-feira:\nDas 08:00 Ã s 12:00\nDas 14:00 Ã s 18:00\n\nAos sÃ¡bados:\nDas 08:00 Ã s 12:00\n\nDomingo: Fechado\n\n*0* - ğŸ  Voltar ao Menu Principal\n\nObrigado pela preferÃªncia! ğŸ“¦ğŸšŒ",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-4-tourism",
      "type": "message",
      "position": {
        "x": 900,
        "y": 100
      },
      "data": {
        "title": "OpÃ§Ã£o 4 - Turismo e LocaÃ§Ã£o",
        "triggers": [
          "4",
          "turismo",
          "locacao",
          "locaÃ§Ã£o",
          "fretamento",
          "excursao",
          "excursÃ£o"
        ],
        "response": "ğŸš *TURISMO E LOCAÃ‡ÃƒO*\n\nPara serviÃ§os de turismo e locaÃ§Ã£o de veÃ­culos, entre em contato:\n\nğŸ“± *WhatsApp Especializado:*\n*(63) 98466-6184*\n\nNossos consultores oferecerÃ£o:\nâ€¢ Pacotes turÃ­sticos\nâ€¢ LocaÃ§Ã£o de Ã´nibus e vans\nâ€¢ Fretamento para eventos\nâ€¢ ExcursÃµes personalizadas\nâ€¢ Transporte executivo\n\nğŸ• *HorÃ¡rio de Atendimento:*\nDe segunda a sexta-feira:\nDas 08:00 Ã s 12:00\nDas 14:00 Ã s 18:00\n\nAos sÃ¡bados:\nDas 08:00 Ã s 12:00\n\nDomingo: Fechado\n\n*0* - ğŸ  Voltar ao Menu Principal\n\nVenha viajar conosco! ğŸšâœ¨",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "option-5-real-expresso",
      "type": "message",
      "position": {
        "x": 300,
        "y": 300
      },
      "data": {
        "title": "OpÃ§Ã£o 5 - Real Expresso",
        "triggers": [
          "5",
          "real expresso",
          "real",
          "expresso"
        ],
        "response": "ğŸšŒ *ATENDIMENTO REAL EXPRESSO*\n\nPara atendimento especÃ­fico da Real Expresso, entre em contato:\n\nğŸ“± *WhatsApp Especializado:*\n*(63) 99240-5166*\n\nServiÃ§os Real Expresso:\nâ€¢ Passagens interestaduais\nâ€¢ Rotas especÃ­ficas\nâ€¢ InformaÃ§Ãµes de horÃ¡rios\nâ€¢ Reservas e cancelamentos\n\nğŸ• *HorÃ¡rio de Atendimento:*\nSegunda a sexta: Das 08:00 Ã s 19:00\n\nSÃ¡bado e domingo:\nDas 08:00 Ã s 12:00\nDas 14:00 Ã s 19:00\n\n*0* - ğŸ  Voltar ao Menu Principal\n\nObrigado pela preferÃªncia! ğŸšŒ",
        "active": 1
      },
      "connections": [
        "fallback-auto"
      ]
    },
    {
      "id": "fallback-auto",
      "type": "human",
      "position": {
        "x": 300,
        "y": 600
      },
      "data": {
        "title": "Fallback AutomÃ¡tico",
        "description": "Transfere automaticamente para operador quando nÃ£o hÃ¡ correspondÃªncia",
        "triggers": ["*"],
        "response": "ğŸ‘¨â€ğŸ’¼ Vou transferir vocÃª para nosso atendimento especializado!\n\nğŸ¤” NÃ£o consegui processar sua mensagem automaticamente, mas nossa equipe poderÃ¡ ajudÃ¡-lo melhor.\n\nEm alguns instantes um operador entrarÃ¡ em contato!",
        "priority": 999
      },
      "connections": []
    },
    {
      "id": "end-1",
      "type": "end",
      "position": {
        "x": 650,
        "y": 250
      },
      "data": {
        "title": "Fim",
        "description": "Conversa finalizada"
      },
      "connections": []
    }
  ],
  "connections": [
    {
      "id": "start-1-welcome-message",
      "source": "start-1",
      "target": "welcome-message"
    },
    {
      "id": "welcome-message-option-1-buy-ticket",
      "source": "welcome-message",
      "target": "option-1-buy-ticket"
    },
    {
      "id": "welcome-message-option-2-schedules",
      "source": "welcome-message",
      "target": "option-2-schedules"
    },
    {
      "id": "welcome-message-option-3-packages",
      "source": "welcome-message",
      "target": "option-3-packages"
    },
    {
      "id": "welcome-message-option-4-tourism",
      "source": "welcome-message",
      "target": "option-4-tourism"
    },
    {
      "id": "welcome-message-option-5-real-expresso",
      "source": "welcome-message",
      "target": "option-5-real-expresso"
    },
    {
      "id": "welcome-message-fallback-auto",
      "source": "welcome-message",
      "target": "fallback-auto"
    },
    {
      "id": "option-1-buy-ticket-process-ticket-request",
      "source": "option-1-buy-ticket",
      "target": "process-ticket-request"
    },
    {
      "id": "option-2-schedules-fallback-auto",
      "source": "option-2-schedules",
      "target": "fallback-auto"
    },
    {
      "id": "option-3-packages-fallback-auto",
      "source": "option-3-packages",
      "target": "fallback-auto"
    },
    {
      "id": "option-4-tourism-fallback-auto",
      "source": "option-4-tourism",
      "target": "fallback-auto"
    },
    {
      "id": "option-5-real-expresso-fallback-auto",
      "source": "option-5-real-expresso",
      "target": "fallback-auto"
    }
  ]
}
